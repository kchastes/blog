# 1.第一章

## 1.1 什么是因特网?

构成部件: ***互联数十亿计算设备的网络***.  设备称为**主机**或**端系统**. 主机通过**通信链路(由不同的物理媒介组成)**和**分组交换机(路由器)**互相链接, 不同通信媒介有不同的传输速率. 传输速率以`bit/s`或`bps`衡量. 当一台主机向另一台主机发送数据时, 会将数据分段发送, 并为每段加上首部字节, 简称**分组**. 最终在目的地组装. 交换机接受分组, 同时又转发分组. 分组传送的过程就类似于卡车送货, 行驶路径为网络路径, 高速路, 桥类似于通信链路, 分叉路口类似于交换机. 网络由**ISP(因特网服务提供商)**分层提供, 最高层用高速光缆互联. 各部件遵循特定的协议运作.

服务方面: 提供应用程序提供基础服务. 如电子邮件, `Web`冲浪. 应用程序发送数据由端系统提供**套接字接口**供应用程序发送数据. 套接字接口就类似于邮局写信格式, 需要遵守该格式, 信件才能寄出.

**协议**定义了报文发送的格式和顺序, 以及接受和发送后所进行的动作.

## 1.2 接入方式

1. 家庭用户

   1. **数字用户线(DSL)**: 通过使用电话线区分频段进行网络通信. 通过调制解调器处理数据信号(**DSLAM:数字用户线复用器**).

   ![数字用户线](../image/image-20210723163928713.png)

## 1.3 分组交换

端系统间交换**报文**, 报文将被划分为多个分组, 每个分组通过通信链路和交换机.

1. 存储转发延时: 多数交换机在开始传输分组之前, 必须接收到整个分组
2. 排队延时: 如果分组到达后, 对应链路繁忙, 则分组将在输出缓存进行等待. 网络拥塞会造成丢包(尽最大努力, 但不保证)

如何知道路由链路? 通过路由选择协议自动设置转发表, 路由选择协议可以决定从路由器到目标地的最短路径, 从而通过最短路径来配置路由器的转发表

## 1.4 电路交换

通过预留资源空间进行数据交换, 优化技术: **频分复用**, **时分复用**

1. 频分复用: 共享频段已节省资源.
2. 时分复用: 利用空闲间隙合理利用资源.

## 1.5 时延 丢包 吞吐量

吞吐量: 每秒能传输的数据量

**时延类型**: 处理时延, 排队时延, 传输时延, 传播时延.

**处理时延:** 检查分组首部, 以决定发送的链路

**排队时延:** 在路由器的报文队列中等待传输的时间.

**传输时延:** 将分组推往链路的时间, 类似于汽车点火启动的状态.

**传播时延:**分组通过链路到达下一步目的地的时间;

分组到达的速度大于传播速度, 则会形成队列, 拥挤.丢包 , windows可以使用`tracert` 命令查看到各个地址的路由路径. `Linux`使用`Traceroute ` ,返回的三个时间是发送时间, 返回时间, 平均时间， `linux`的时间可能为三次往返时间

路由器到服务器的数据, 和服务器到路由器的数据 之间的速率不能太快, 得处于一个均衡状态: 路由器到服务器的速率 > 服务器到路由器的速率.  网络吞吐率不仅受通信链路的速率影响, 同时还有是否有其他数据通过该链路.

## 1.6 协议

**协议分层的理由**: 提供模块化, 使得某层提供的服务易于改变, 只需满足上下层所需的要求即可,  同时其他层次不需求做出改变(类似于接口提供不同实现). 更加灵活, 可以定义不同功能.

**分层的坏处**: 提升运营成本, 升级成本.,增加了复杂性. 同时又可能冗余较低层的功能.

网络都是以分层的方式组织协议和实现这些协议的网络硬件和软件. 某层使用自身的功能或下一层所提供的服务来提供服务.

应用层和网络层通常都是实现于应用中, 而 链路层和物理层通常处于网卡接口中, 网络层则软硬混合.

### 1.7 应用层

 包含如: `HTTP(Web文档请求和传送)`,`SMTP(电子邮件报文服务)`,`FTP(文件传送)` , 该层协议分布在端系统中,  该层信息称为**报文**.

### 1.8 传输层

传输层负责传递应用层报文. 包含如: `TCP`，`UDP`, 提供了可靠性链接和拥塞控制. 由操作系统内核实现(也可以说是由应用所处的设备内核实现). 传输的数据称为**报文段**.